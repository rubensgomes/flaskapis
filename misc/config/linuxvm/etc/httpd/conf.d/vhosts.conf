# ATTENTION: Do NOT Listen on IP addresses because those IP addresses
# may not be up and running when the httpd is started.  And if that
# happens the Apache httpd will *NOT* be started.

# rubens-gomes.com (IP: 69.10.46.175)
<VirtualHost *:80>

  ServerName www.rubens-gomes.com
  ServerAlias rubens-gomes.com
  DocumentRoot /var/www/rubens-gomes

  CustomLog logs/rubens-gomes.access_log common
  ErrorLog logs/rubens-gomes.error_log

  LogLevel debug rewrite:trace8

  # NC : No Case
  # L  : Last rule.  Stop the rewriting.  Don't apply more rules
  # R  : Redirect

  # Redirect requests that are NOT for the context-paths "/appsgo"
  # and "/rubens" to http://www.rubens-gomes.com/rubens
  #
  # /appsgo: Apache httpd AngularJS 1 context path
  # /rubens: Tomcat JSP webapp context path
  RewriteEngine on
  RewriteCond %{REQUEST_URI} !^/appsgo [NC]
  RewriteCond %{REQUEST_URI} !^/rubens [NC]
  RewriteRule ^/?(.*) http://www.rubens-gomes.com/rubens/$1 [R,L]

  # mod_proxy for /rubens Apache httpd <--> Tomcat
  ProxyPass         /rubens  http://localhost:8086/rubens
  ProxyPassReverse  /rubens  http://localhost:8086/rubens

  <Directory /var/www/rubens-gomes/appsgo>
    Options Indexes FollowSymLinks
    AllowOverride None
    Require all granted

    # Don't rewrite files or directories
    RewriteCond %{REQUEST_URI} !^/src [NC]
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]

    # Rewrite everything else to index.html to allow html5 state links
    RewriteRule ^ index.html [L]
  </Directory>

</VirtualHost>

###############################################################################

# api.restportal.com  (IP: 69.10.46.175)
<VirtualHost *:80>
  ServerName api.restportal.com

  # Possible values: debug, info, notice, warn, error, crit, 
  # alert, emerg.
  #LogLevel info
  LogLevel debug
  CustomLog logs/api.restportal.access_log combined
  ErrorLog logs/api.restportal.error_log

  # --- > WSGI Settings < ---
  WSGIScriptAlias / /home/wsgi/flaskapis/flaskapis.wsgi

  # inactivity-timeout = 18000 (5 hours)
  WSGIDaemonProcess wsgi-group \
    user=wsgi group=wsgi \
    processes=2 threads=10 \
    home=/home/wsgi/flaskapis \
    python-path=/home/wsgi/flaskapis/venv/lib/python3.5/site-packages \
    maximum-requests=1000 \
    inactivity-timeout=18000 \
    deadlock-timeout=60 \
    display-name=mod_wsgi

  <Directory /home/wsgi/flaskapis>
    AllowOverride None
    Require all granted
    WSGIApplicationGroup wsgi-scripts
    WSGIProcessGroup wsgi-group 
    WSGIPassAuthorization On
    WSGIScriptReloading On
    # Add CORS authorization to enable CORS
    Header set Access-Control-Allow-Origin "*"
  </Directory>

</VirtualHost>

###############################################################################

# restportal.com  (IP: 69.10.46.175)
<VirtualHost *:80>
  ServerName www.restportal.com
  ServerAlias restportal.com

  DocumentRoot /var/www/restportal/swagger-doc

  # Possible values: debug, info, notice, warn, error, crit, 
  # alert, emerg.
  #LogLevel info
  LogLevel debug
  CustomLog logs/restportal.access_log combined
  ErrorLog logs/restportal.error_log

  <Directory /var/www/restportal/swagger-doc>
    # Add CORS authorization to enable CORS
    Header set Access-Control-Allow-Origin "*"
    Options Indexes FollowSymLinks
    AllowOverride None
    Require all granted
  </Directory>

</VirtualHost>

###############################################################################

# softlagos.com  (IP: 69.10.46.175)
<VirtualHost *:80>
  ServerName www.softlagos.com
  ServerAlias softlagos.com
  DocumentRoot /var/www/softlagos/

  LogLevel debug
  CustomLog logs/softlagos.access_log common
  ErrorLog logs/softlagos.error_log

  AddHandler application/x-httpd-php .html
  AddLanguage en .en
  AddLanguage pt .pt
  LanguagePriority en pt
  ForceLanguagePriority Prefer

  <Directory /var/www/softlagos>
    DirectoryIndex index
    Options Indexes FollowSymLinks MultiViews 
    AllowOverride None
    Require all granted
  </Directory>

</VirtualHost>

###############################################################################

# ezlista.com (IP: 69.10.46.173)
<VirtualHost *:80>

  ServerName www.ezlista.com
  ServerAlias ezlista.com m.ezlista.com

  DocumentRoot /var/www/ezlista/
  ErrorDocument 503 /error/503.html

  CustomLog logs/ezlista.access_log common
  ErrorLog logs/ezlista.error_log

  # Redirect requests for http://www.ezlista.com/
  # to https://www.ezlista.com/
  RewriteEngine on
  RewriteRule ^/?(.*) https://www.ezlista.com/$1 [R,L]

  LogLevel debug rewrite:trace8

</VirtualHost>

